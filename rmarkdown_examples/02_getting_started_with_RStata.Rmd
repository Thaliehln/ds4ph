---
title: "Getting started with R markdown to generate reports using R and Stata"
author: "H. Langet, S. Godfrey and C.Festo"
date: "`r Sys.Date()`"
output:
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# R packages to install to generate dynamic reports using R and Stata

## Install RStata

RStata is a simple R / Stata interface which enable the user to:

* execute Stata commands (both inline and from a .do file) from R;
* pass a data.frame to Stata;
* return a data.frame to R;
* include Stata chunks in knitr documents (however each chunk is independent from the others; feature tested with LaTeX/Linux).

Check if the package `RStata` is already installed.

```{r}
rstata_is_installed <- ("RStata" %in% installed.packages())
```

If the package `RStata` is not already installed, download and install it.

```{r}
if (!rstata_is_installed){
  install.packages("RStata")
}
```

## Install haven


Check if the package `haven` is already installed.

```{r}
haven_is_installed <- ("haven" %in% installed.packages())
```

If the package `haven` is not already installed, download and install it.

```{r}
if (!haven_is_installed) {
  install.packages("haven")
}
```

## Install usethis

Check if the package `usethis` is already installed.

```{r}
usethis_is_installed <- ("usethis" %in% installed.packages())
```

If the package `usethis` is not already installed, download and install it.

```{r}
if (!usethis_is_installed) {
  install.packages("usethis")
}
```

# Set Stata binary path

## Find and format the path to your Stata binary executable

You should normally get a path which is similar to `"\"C:\\Program Files\\Stata16\\StataIC-64\""`

```{r}
library(RStata)
stata_bin_path <- RStata::chooseStataBin()
print(stata_bin_path)
```

As this configuration is lost when R is closed, let us add the Stata binary path in your `.Rprofile`. 

## Open configuration file

```{r}
library(usethis)
usethis::edit_r_profile("user")
```
