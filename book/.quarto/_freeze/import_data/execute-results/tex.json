{
  "hash": "876406dc0fb39647819542645b7b8b9a",
  "result": {
    "markdown": "---\ntitle: \":blue_book: Import external data\"\n---\n\n\n## Introduction\n\nMost of the time you will want to generate *Quarto* documents using your own data. To this aim, you will have to import data from external sources such as files, URLs, or server data (e.g., ODK Central data). There is a dedicated importing function in R and Python for almost every data format. In this section we show you how to import Stata (`.dta`), Excel (`.xlsx`) and comma-separated values (CSV, `.csv`) data formats from files and from URLs, as well as how to import ODK data directly from an ODK Central server.\n\n::: callout-important\nAs you import data to further process / analyse them, you have to store the imported data in a data frame.\n::: \n\n## Import data from files {#sec-import-data-from-files}\n\nAll Python and R functions only require as input the path where the file you want to import is stored. This path has to be passed as a  sequence of characters (*character*) within double (\"\") or single ('') quotes. \n\nThe path can be either:\n\n* relative to your Quarto document\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\nrelative_path <- \"./data/mydata.csv\"\n```\n````\n:::\n\n\n* absolute\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\nabsolute_path <- \"C:/Users/myuser/Documents/mydata.csv\"\n```\n````\n:::\n\n\nFunctions in general have additional optional arguments.\n\n### Import Excel data\n\n::: panel-tabset\n\n#### :pencil2: Exercise 1\n\nImport the Excel data set **dataset1.xlsx** and store it into a data frame called **df1**.\n\n::: callout-tip\n-   Stata: use the [import excel](https://www.stata.com/manuals/dimportexcel.pdf) Stata command with the [stata](https://rdrr.io/github/lbraglia/RStata/man/stata.html) function from the `RStata` package.\n-   R: use the [read.xlsx](https://www.rdocumentation.org/packages/openxlsx/versions/4.2.5/topics/read.xlsx) function from the `openxlsx` package.\n-   Python: use the [read_excel](https://pandas.pydata.org/docs/reference/api/pandas.read_excel.html) function from the `pandas` package.\n:::\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n# Write your code here\n```\n````\n:::\n\n\n#### Stata\n\nUse the [import excel](https://www.stata.com/manuals/dimportexcel.pdf) Stata command with the [stata](https://rdrr.io/github/lbraglia/RStata/man/stata.html) function from the `RStata` package.\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\nlibrary(RStata)\n\ndf1 <- RStata::stata(\"import excel ./data/dataset1.xlsx\",\n                     data.out = TRUE)\n```\n````\n\n::: {.cell-output .cell-output-stdout}\n```\n. import excel ./data/dataset1.xlsx\n(51 vars, 10,309 obs)\n```\n:::\n:::\n\n\n#### R\n\nUse the [read.xlsx](https://www.rdocumentation.org/packages/openxlsx/versions/4.2.5/topics/read.xlsx) function from the `openxlsx` package.\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\nlibrary(openxlsx)\n\ndf1 <- openxlsx::read.xlsx(\"./data/dataset1.xlsx\")\n```\n````\n:::\n\n\n#### Python\n\nUse the [read_excel](https://pandas.pydata.org/docs/reference/api/pandas.read_excel.html) function from the `pandas` package.\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{python}}\nimport pandas\n\ndf1 = pandas.read_excel('./data/dataset1.xlsx')\n```\n````\n:::\n\n:::\n\n### Import CSV data\n\n::: panel-tabset\n\n#### :pencil2: Exercise 2\n\nRead the CSV data set **dataset1.csv** and store it into a data frame called **df2**.\n\n::: callout-tip\n-   Stata: use the import delimited Stata command with the [stata](https://rdrr.io/github/lbraglia/RStata/man/stata.html) function from the `RStata` package.\n-   R: use the [read.csv](https://www.rdocumentation.org/packages/utils/versions/3.6.2/topics/read.table) function from the `haven` package.\n-   Python: use the [read_csv](https://pandas.pydata.org/docs/reference/api/pandas.read_csv.html) function from the `pandas` package.\n:::\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n# Write your code here\n```\n````\n:::\n\n\n#### Stata\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n# library(RStata)\n# \n# df2 <- RStata::stata(\"import delimited ./data/dataset1.csv\",\n#                      data.out = TRUE)\n```\n````\n:::\n\n\n#### R\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\ndf2 <- read.csv(\"./data/dataset1.csv\")\n```\n````\n:::\n\n\n#### Python\n\nUse the [read_csv](https://pandas.pydata.org/docs/reference/api/pandas.read_csv.html) function from the `pandas` package.\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{python}}\nimport pandas\n\ndf2 = pandas.read_csv('./data/dataset1.csv')\n```\n````\n:::\n\n:::\n\n### Import Stata data\n\n::: panel-tabset\n#### :pencil2: Exercise 3\n\nRead the Stata data set **dataset1.dta** and store it into a data frame called **df3**.\n\n::: callout-tip\n-   Stata: use the `use` Stata command with the [stata](https://rdrr.io/github/lbraglia/RStata/man/stata.html) function from the `RStata` package.\n-   R: use the [read_dta](https://haven.tidyverse.org/reference/read_dta.html) function from the `haven` package. This package supports SAS, STATA and SPSS software.\n-   Python: use the [read_stata](https://pandas.pydata.org/docs/reference/api/pandas.read_stata.html) function from the `pandas` package.\n:::\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n# Write your code here\n```\n````\n:::\n\n\n#### Stata\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\nlibrary(RStata)\n\ndf3 <- RStata::stata(\"use ./data/dataset1.dta\",\n                     data.out = TRUE)\n```\n````\n\n::: {.cell-output .cell-output-stdout}\n```\n. use ./data/dataset1.dta\n```\n:::\n:::\n\n\n#### R\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\nlibrary(haven)\n\ndf3 <- haven::read_dta(\"./data/dataset1.dta\")\n```\n````\n:::\n\n\n#### Python\n\nUse the [read_stata](https://pandas.pydata.org/docs/reference/api/pandas.read_stata.html) function from the `pandas` package.\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{python}}\nimport pandas\n\ndf3 = pandas.read_stata('./data/dataset1.dta')\n```\n````\n:::\n\n:::\n\n## Import data from URLs\n\nAll functions can accept URLs as well instead of the path to a specific file.\n\n::: panel-tabset\n#### :pencil2: Exercise 4\n\nImport the CSV data set that contains a comprehensive spatial inventory of 98,745 public health facilities in Sub Saharan Africa directly from the following  [url](https://open.africa/dataset/d7335980-29d5-476c-bf7a-feb4e22cf631/resource/e2432e8a-cf15-4a8b-b8c3-567f443c1459/download/cfa-data-hospitals-in-africa-00-ssa-mfl-130219.xlsx-ssa-mfl.csv) and store it into a data frame called **df4**.\n\nTo learn more about how this data set was assembled, please refer to [@maina_spatial_2019]\n\n::: callout-tip\n-   Stata: use the import excel Stata command with the `stata` function from the `RStata` package.\n-   R: use the [read.xlsx](https://www.rdocumentation.org/packages/openxlsx/versions/4.2.5/topics/read.xlsx) function from the `openxlsx` package.\n-   Python: use the [read_excel](https://pandas.pydata.org/docs/reference/api/pandas.read_excel.html) function from the `pandas` package. In the latest version of pandas (0.19.2) you can directly pass the url\n:::\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n# Write your code here\n```\n````\n:::\n\n\n#### Stata\n\nHere, because quotes are already used for the Stata command, you need to use the other type of quotes for indicating the URL.\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\nlibrary(RStata)\n\ndf2 <- RStata::stata('import delimited \"https://open.africa/dataset/d7335980-29d5-476c-bf7a-feb4e22cf631/resource/e2432e8a-cf15-4a8b-b8c3-567f443c1459/download/cfa-data-hospitals-in-africa-00-ssa-mfl-130219.xlsx-ssa-mfl.csv\"',\n                     data.out = TRUE)\n```\n````\n\n::: {.cell-output .cell-output-stdout}\n```\n. import delimited \"https://open.africa/dataset/d7335980-29d5-476c-bf7a-feb4e22\n> cf631/resource/e2432e8a-cf15-4a8b-b8c3-567f443c1459/download/cfa-data-hospita\n> ls-in-africa-00-ssa-mfl-130219.xlsx-ssa-mfl.csv\"\n(7 vars, 98,745 obs)\n```\n:::\n:::\n\n\n#### R\n\nUse the [read.xlsx](https://www.rdocumentation.org/packages/openxlsx/versions/4.2.5/topics/read.xlsx) function from the `openxlsx` package.\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\ncsv_url <- \"https://open.africa/dataset/d7335980-29d5-476c-bf7a-feb4e22cf631/resource/e2432e8a-cf15-4a8b-b8c3-567f443c1459/download/cfa-data-hospitals-in-africa-00-ssa-mfl-130219.xlsx-ssa-mfl.csv\"\ndf4 <- read.csv(csv_url)\n```\n````\n:::\n\n\n#### Python\n\nUse the [read_excel](https://pandas.pydata.org/docs/reference/api/pandas.read_excel.html) function from the `pandas` package.\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{python}}\nimport pandas\n\ncsv_url = \"https://open.africa/dataset/d7335980-29d5-476c-bf7a-feb4e22cf631/resource/e2432e8a-cf15-4a8b-b8c3-567f443c1459/download/cfa-data-hospitals-in-africa-00-ssa-mfl-130219.xlsx-ssa-mfl.csv\"\ndf1 = pandas.read_csv(csv_url)\n```\n````\n:::\n\n:::",
    "supporting": [
      "import_data_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {
      "knitr": [
        "{\"type\":\"list\",\"attributes\":{},\"value\":[]}"
      ]
    },
    "preserve": null,
    "postProcess": false
  }
}