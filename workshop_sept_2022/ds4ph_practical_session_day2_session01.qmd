---
title: "Data Science for Public Health - Day 2 - Session 1"
date: "2022-09-27"
format:
  html:
    toc: true
    number-sections: true
editor: visual
execute:
  echo: false
  warning: false
---

# Introduction

TBD

# Malaria research questions

Research questions in an enumerated list

# Dataset description

Information about the consultations of 10,308 children [1 day - 59 months] from 18 facilities (dispensaries and health centres) in Kaliua District, Sengerema District and Tanga District, Tanzania. Data were collected using *ODK* (ODK Collect, ODK Central) between **start date** and **end date**. Data were made available by IHI and Swiss TPH and the Tools for Integrated Management of Childhood Illness (TIMCI) project.

The dataset is stored in **dataset1.dta**.

## Data collection

Research assistants recorded the following information from different sources:

-   from the caregiver:
    -   sociodemographic information
    -   information on treatment received before consultation
    -   **clinical presentation** (variables starting with the suffix **CLIN**)
    -   laboratory investigations (variables starting with the suffix **TEST**)
    -   diagnosis (variables starting with the suffix **DX**)
    -   prescribed medication (variables starting with the suffix **RX**)
    -   referral advice will be extracted from clinical notes and / or facility registers (variables starting with the suffix **MGMT**).

Research assistants sought clarification from healthcare providers only in cases where these variables were not clear from the records.

## Data cleaning and data de-identification

Personally identifiable information (PII) were removed.

## Dataset structure

Load the data and show the structure of your dataset

## Codebook

# Familiarise with the dataset

## Import the data

Most of the time you will want to use R on your own data so the first thing you’ll usually do when starting an analysis is to load your data into R. 

This dataset comes in some non-R format. For almost every data format there is a dedicated importing function in R. We’ll start by showing you how to read in non-R formats and then show you how to save and load your R workspace. For demonstration purposes, we have provided the NINDS data set (Marler et al. 1995) you have encountered in the lecture in two formats: NINDS.csv and NINDS.xlsx.

If you want to work with the data, it makes sense to store it in a variable.

Read the dataset and store it into a dataframe called **df**.

-   Stata hint:
-   R hint: use the `read_dta` function from the `haven` package.
-   Python hint:

```{r}
#| echo: true
# Write your code here
```

```{r}
library(haven)
df <- haven::read_dta("dataset1.dta")
```

## Structure of the data

Text

* Stata hint:
* R hint: you need to load the `dplyr` library to use piping

```{r}
#| echo: true
# Write your code here
```

```{r}
library(RStata)
RStata::stata("codebook", data.in = df)
```

```{r}
#| df-print: kable
library(magrittr)
data.frame(variable = names(df),
           classe = sapply(df, typeof),
           first_values = sapply(df, function(x) paste0(head(x),  collapse = ", ")),
           row.names = NULL)
```

# Data analysis plan

A brief plan of your data analysis. For now, all you need to include in this section is which variables from the dataset you plan to use, and what associations between them you will investigate to help answer your research question.

```{r}
#| df-print: kable
library(dplyr)
df %>%
  head(10) %>% 
  dplyr::select("child_ID")
```
# References

-   scikit-learn MOOC
